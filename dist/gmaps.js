!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("gmaps-marker-clusterer")):"function"==typeof define&&define.amd?define(["jquery","gmaps-marker-clusterer"],e):"object"==typeof exports?exports.GMaps=e(require("jquery"),require("gmaps-marker-clusterer")):t.GMaps=e(t.jquery,t["gmaps-marker-clusterer"])}(window,function(t,e){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(e,i){e.exports=t},function(t,e,i){"use strict";var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};var o=i(0);t.exports=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gmaps=e,this.marker=i,this.content=n;var r=this.marker.element.attr("data-gmaps-overlay")||this.gmaps.options.overlays;if(r){this.overlay=new google.maps.OverlayView,this.overlay.element=o('<div class="'+r+'">'+this.content+"</div>");var a=o('<button type="button" class="gmaps-overlay-close"></button>');this.overlay.element.prepend(a),a.on("click",this.marker.close.bind(this.marker)),this.overlay.onAdd=this.overlayAdd.bind(this),this.overlay.draw=this.overlayDraw.bind(this),this.overlay.remove=this.overlayRemove.bind(this)}else{var h=s(this.gmaps.options.infowindows&&this.gmaps.options.infowindows[this.marker.element.attr("data-gmaps-infowindow")||"default"]||{},{content:this.content,position:this.marker.position});this.infowindow=new google.maps.InfoWindow(h),this.infowindow.addListener("closeclick",this.close.bind(this))}}return t.prototype.overlayAdd=function(){var t=o(this.overlay.getPanes().floatPane);t.parent().addClass("gmaps-overlay-pane"),t.append(this.overlay.element),this.gmaps.element.trigger("overlay_add",this.overlay)},t.prototype.overlayDraw=function(){var t=this.overlay.getProjection().fromLatLngToDivPixel(this.marker.position);this.overlay.element.css({left:t.x+"px",top:t.y+"px"}),this.gmaps.element.trigger("overlay_draw",this.overlay)},t.prototype.overlayRemove=function(){this.overlay.element.detach(),o(".gmaps-overlay-pane").removeClass("gmaps-overlay-pane"),this.gmaps.element.trigger("overlay_remove",this.overlay)},t.prototype.open=function(){this.overlay?this.overlay.setMap(this.gmaps.map):this.infowindow.open(this.gmaps.map),this.gmaps.element.trigger("content_open",this)},t.prototype.close=function(){this.overlay?this.overlay.setMap(null):this.infowindow.close(),this.gmaps.element.trigger("content_close",this)},t}()},function(t,e,i){"use strict";var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};var o=i(0),n=i(1);t.exports=function(){function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.length){var r,a,h=i.attr("data-gmaps-location");if(h&&(h=h.split(",")),r=h?h[0]:i.attr("data-gmaps-lat")||i.attr("data-gmaps-latitude"),a=h?h[1]:i.attr("data-gmaps-lng")||i.attr("data-gmaps-longitude"),!isNaN(r)&&!isNaN(a)){this.gmaps=e,this.element=i,this.position=new google.maps.LatLng(r,a),this.element.data("GMapsMarker",this);var l={map:this.gmaps.options.cluster?null:this.gmaps.map,position:this.position,label:this.element.attr("data-gmaps-label"),title:this.element.attr("data-gmaps-title")||this.element.attr("title")||this.element.find(".gmaps-title").text()},p=this.gmaps.options.markers?this.gmaps.options.markers[this.element.attr("data-gmaps-marker")]||this.gmaps.options.markers.default:null;if(p&&(p.label&&l.label&&(p.label.text=l.label),l=s(l,p)),this.marker=new google.maps.Marker(l),this.marker.addListener("mouseover",this.mouseover.bind(this)),this.marker.addListener("mouseout",this.mouseout.bind(this)),this.marker.addListener("click",this.open.bind(this)),this.element.children().length){var m=this.element.html();if(m&&o.trim(m).length)this.content=new n(this.gmaps,this,m);else{var c=this.element.children("a");c.length&&(this.link=c.attr("href"),this.linkBlank="_blank"==c.attr("target"),l.title||this.marker.setTitle(c.text()))}}}}}return t.prototype.offset=function(t,e){t=t*Math.PI*2;var i=this.marker.getIcon();i.anchor||(i.anchor={x:0,y:0}),i.anchor.x+=Math.sin(t)*e,i.anchor.y+=Math.cos(t)*e},t.prototype.mouseover=function(){this.marker.setOptions({zIndex:9999999}),this.gmaps.element.trigger("marker_mouseover",this)},t.prototype.mouseout=function(){this.marker.setOptions({zIndex:this.index}),this.gmaps.element.trigger("marker_mouseout",this)},t.prototype.highlight=function(t,e){this.marker.setOptions({opacity:t||!e?1:.5,zIndex:t&&e?9999999:this.index}),this.gmaps.element.trigger("marker_highlight",this)},t.prototype.open=function(){if(this.link)this.gmaps.metaKey||this.linkBlank?window.open(this.link):window.location=this.link;else if(this.content&&this.marker.visible)this.gmaps.closeAllMarkers(),this.marker.setVisible(!1),this.content.open(),this.gmaps.element.trigger("marker_open",this);else if(this.gmaps.options.markerEmptyZoom){var t=this.gmaps.options.markerEmptyZoom;"string"==typeof t&&(t=this.gmaps.map.getZoom()+parseInt(t)),this.gmaps.map.setZoom(t),this.gmaps.map.panTo(this.position)}},t.prototype.close=function(){this.content&&!this.marker.visible&&(this.marker.setVisible(!0),this.content.close(),this.gmaps.element.trigger("marker_close",this))},t}()},function(t,i){t.exports=e},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(e){var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};i(3);var o=i(0),n=i(2),r=o(window),a={apiKey:null,fit:!0,fitZoom:-1,fitZoomMin:0,fitZoomMax:20,markerEmptyZoom:"3",spread:0},h={mapTypeControl:!1,streetViewControl:!1,zoom:17},l={cssClass:"gmaps-cluster"};o.fn.gmaps=function(e,i,s){return o(this).each(function(o,n){new t.exports(n,e,i,s)})},window.$&&(window.$.fn.gmaps=o.fn.gmaps);var p=[];window.gmaps_load_callback=function(){for(;p.length;)p.pop().init()},e.GMaps=t.exports=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".gmaps",i=arguments[1],n=arguments[2],r=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=o(e),this.element.length&&!this.element.data("GMaps")&&(this.element.length>1?this.element.gmaps(i,n,r):(this.element.data("GMaps",this),this.options=s({},a,i||{}),this.mapOptions=s({},h,n||{}),this.callback=r,window.google&&window.google.maps?this.init():(p.push(this),1===p.length&&o.getScript("https://maps.googleapis.com/maps/api/js?v=3&libraries=places&callback=gmaps_load_callback&key="+this.options.apiKey))))}return t.prototype.init=function(){var t=this,e=this.element.attr("data-gmaps-container"),i=[this.element.clone()];if(this.element.is("ul"))if(this.element.children("li").each(function(t,e){i.push(o(e))}),e)e=o('[data-gmaps-id="'+e+'"],'+e);else{var a=o("<div></div>");o.each(this.element[0].attributes,function(t,e){a.attr(e.name,e.value)});var h=void 0,p=void 0,m=void 0,c=this.element[0].events||o.data(this.element[0],"events")||o._data(this.element[0],"events");for(h in c)for(p=0;p<c[h].length;p++)m=c[h][p],a.on(m.type,m.handler);this.element.replaceWith(a),this.element=a}e&&e.length||(e=this.element),this.map=new google.maps.Map(e[0],this.mapOptions),this.markers=[],this.bounds=new google.maps.LatLngBounds;var g=void 0,u=void 0,f=void 0,d={};for(g=0;g<i.length;g++)(u=new n(this,i[g])).element&&(this.bounds.extend(u.position),this.markers.push(u),this.options.spread&&(d[f="lat"+u.position.lat()+"lng"+u.position.lng()]||(d[f]=[]),d[f].push(u)));if(this.options.spread){var v=void 0,y=void 0;for(v in d)if((y=d[v]).length>1)for(g=0;g<y.length;g++)y[g].offset(g/y.length,this.options.spread)}if(this.markers=this.markers.sort(function(t,e){var i=t.position.lat(),s=e.position.lat();return i==s&&(i=t.position.lng(),s=e.position.lng()),i>s?-1:i<s?1:0}),this.markers.forEach(function(t,e){t.index=e,t.marker.setOptions({zIndex:e})}),this.options.cluster){var k=this.markers.map(function(t){return t.marker}),w=s(l,!0===this.options.cluster?{}:this.options.cluster);this.clusterer=new MarkerClusterer(this.map,k,w)}this.options.search&&(this.searchBox=new google.maps.places.SearchBox(o(this.options.search)[0]),this.searchBox.addListener("places_changed",this.search.bind(this))),this.keys=this.keys.bind(this),this.resize=this.resize.bind(this),this.zoom=this.zoom.bind(this),this.tabIndex=-1,this.element.attr("tabindex","0"),this.element.on("focusin",this.focus.bind(this)),this.element.on("focusout",this.focus.bind(this)),google.maps.event.addListenerOnce(this.map,"idle",this.resize),google.maps.event.addListener(this.map,"click",function(){setTimeout(function(){t.closeAllMarkers()},10)}),r.on("resize",this.resize),this.resize(),this.element.trigger("ready",this),"function"==typeof this.callback&&this.callback(this)},t.prototype.focus=function(t){var e=this;clearTimeout(this.focusTimeout),"focusin"==t.type?r.on("keydown keyup",this.keys):(r.off("keydown keyup",this.keys),this.focusTimeout=setTimeout(function(){e.tabIndex=-1;for(var t=0;t<e.markers.length;t++)e.markers[t].highlight(!1,!1)},100))},t.prototype.keys=function(t){this.metaKey="keydown"==t.type&&(t.ctrlKey||t.metaKey),"keydown"==t.type&&(9==t.keyCode?(this.tabIndex=Math.max(-1,Math.min(this.markers.length,this.tabIndex+(t.shiftKey?-1:1))),this.highlight(this.tabIndex)):13==t.keyCode||32==t.keyCode?this.tabIndex>=0&&this.tabIndex<this.markers.length&&(t.preventDefault(),this.markers[this.tabIndex].open()):27==t.keyCode&&this.closeAllMarkers())},t.prototype.highlight=function(t){for(var e=void 0!==t&&t>=0&&t<this.markers.length,i=0;i<this.markers.length;i++)this.markers[i].highlight(i==t,e)},t.prototype.resize=function(){this.options.fit?(google.maps.event.addListenerOnce(this.map,"zoom_changed",this.zoom),this.map.fitBounds(this.bounds)):this.map.setCenter(this.bounds.getCenter())},t.prototype.zoom=function(){var t=this.map.getZoom(),e=this.mapOptions.zoom;this.options.fit&&(e=t+this.options.fitZoom,this.options.fitZoomMin&&(e=Math.max(this.options.fitZoomMin,e)),this.options.fitZoomMax&&(e=Math.min(this.options.fitZoomMax,e))),e!=t&&this.map.setZoom(e),this.element.trigger("zoom",this)},t.prototype.destroy=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];google.maps.event.removeListener(this.map,"zoom_changed",this.zoom),google.maps.event.removeListener(this.map,"idle",this.resize),r.off("keydown keyup",this.keys),r.off("resize",this.resize),t&&this.element.remove(),this.element.trigger("destroy",this)},t.prototype.closeAllMarkers=function(){for(var t=0;t<this.markers.length;t++)this.markers[t].close()},t.prototype.search=function(){var t=this.searchBox.getPlaces();t&&t.length||this.resize();var e=t[0];e.geometry&&e.geometry.viewport||this.resize(),this.map.fitBounds(e.geometry.viewport),this.element.trigger("search",this)},t}()}).call(this,i(4))}])});